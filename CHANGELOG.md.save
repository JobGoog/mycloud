# –ñ—É—Ä–Ω–∞–ª –∏–∑–º–µ–Ω–µ–Ω–∏–π MyCloud

## –î–∞—Ç–∞: 03 –∞–≤–≥—É—Å—Ç–∞ 2025
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º —Å CORS –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π**

### üêõ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

#### 1. –û—à–∏–±–∫–∞ CORS –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–∞ `http://79.174.83.69/signup` –≤–æ–∑–Ω–∏–∫–∞–ª–∞ –æ—à–∏–±–∫–∞:
```
NetworkError when attempting to fetch resource.
–ó–∞–ø—Ä–æ—Å –∏–∑ –ø–æ—Å—Ç–æ—Ä–æ–Ω–Ω–µ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω: –ü–æ–ª–∏—Ç–∏–∫–∞ –æ–¥–Ω–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –∑–∞–ø—Ä–µ—â–∞–µ—Ç —á—Ç–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ —Ä–µ—Å—É—Ä—Å–∞ –Ω–∞ http://79.174.83.69:8000/api/users/. (–ü—Ä–∏—á–∏–Ω–∞: –Ω–µ —É–¥–∞–ª–æ—Å—å –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∑–∞–ø—Ä–æ—Å CORS).
```

**–ü—Ä–∏—á–∏–Ω–∞:** Frontend –æ–±—Ä–∞—â–∞–ª—Å—è –∫ API —á–µ—Ä–µ–∑ –ø–æ—Ä—Ç 8000, –Ω–æ nginx –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ API —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –ø–æ—Ä—Ç 80.

**–†–µ—à–µ–Ω–∏–µ:**
- –§–∞–π–ª: `frontend/src/config.ts`
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ: 
  ```typescript
  // –î–û
  const API_BASE_URL = 'http://79.174.83.69:8000';
  
  // –ü–û–°–õ–ï  
  const API_BASE_URL = 'http://79.174.83.69';
  ```

#### 2. –û—à–∏–±–∫–∞ 405 –ø—Ä–∏ –≤—Ö–æ–¥–µ —Å –Ω–µ–≤–µ—Ä–Ω—ã–º –ø–∞—Ä–æ–ª–µ–º
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ –≤—Ö–æ–¥–µ —Å –Ω–µ–≤–µ—Ä–Ω—ã–º –ø–∞—Ä–æ–ª–µ–º –≤–æ–∑–Ω–∏–∫–∞–ª–∞ –æ—à–∏–±–∫–∞ 405 "Method Not Allowed".

**–ü—Ä–∏—á–∏–Ω–∞:** –ó–∞–ø—Ä–æ—Å –ª–æ–≥–∏–Ω–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–ª—Å—è –Ω–∞ `/auth/token/login/`, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç—Å—è nginx.

**–†–µ—à–µ–Ω–∏–µ:**
- –§–∞–π–ª: `frontend/src/components/LoginForm/LoginForm.tsx`
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ:
  ```typescript
  // –î–û
  const response = await fetch(`${API_BASE_URL}/auth/token/login/`, {
  
  // –ü–û–°–õ–ï
  const response = await fetch(`${API_BASE_URL}/api/v1/auth/token/login/`, {
  ```

#### 3. –û—á–∏—Å—Ç–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ URL'–æ–≤ Django
**–ü—Ä–æ–±–ª–µ–º–∞:** –î—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è –∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã –≤ Django.

**–†–µ—à–µ–Ω–∏–µ:**
- –§–∞–π–ª: `backend/backend_project/urls.py`
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ:
  ```python
  # –î–û
  path("api/v1/auth/", include('djoser.urls')),
  re_path(r'^auth/', include('djoser.urls.authtoken')),
  
  # –ü–û–°–õ–ï
  path("api/v1/auth/", include('djoser.urls')),
  path("api/v1/auth/", include('djoser.urls.authtoken')),
  ```

### üöÄ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:

1. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ API URL**
   - –û–±–Ω–æ–≤–ª–µ–Ω `frontend/src/config.ts`
   - –£–±—Ä–∞–Ω –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—Ç `:8000`

2. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ URL –ª–æ–≥–∏–Ω–∞**
   - –û–±–Ω–æ–≤–ª–µ–Ω `frontend/src/components/LoginForm/LoginForm.tsx`
   - –ò–∑–º–µ–Ω–µ–Ω –ø—É—Ç—å —Å `/auth/token/login/` –Ω–∞ `/api/v1/auth/token/login/`

3. **–û—á–∏—Å—Ç–∫–∞ Django URL –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏**
   - –û–±–Ω–æ–≤–ª–µ–Ω `backend/backend_project/urls.py`
   - –£–±—Ä–∞–Ω –∏–∑–±—ã—Ç–æ—á–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç `re_path(r'^auth/', ...)`

4. **–ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤**
   - –í—ã–ø–æ–ª–Ω–µ–Ω–∞ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞ frontend: `npm run build`
   - –ü–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω gunicorn: `sudo systemctl restart gunicorn`

### ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç:

- ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –æ—à–∏–±–æ–∫ CORS
- ‚úÖ –õ–æ–≥–∏–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –Ω–µ–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–æ—à–∏–±–∫–∞ 400 –≤–º–µ—Å—Ç–æ 405)
- ‚úÖ –í—Å–µ API –∑–∞–ø—Ä–æ—Å—ã –∏–¥—É—Ç —á–µ—Ä–µ–∑ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã
- ‚úÖ Nginx –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã

### üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è:

- –û—à–∏–±–∫–∞ 400 –ø—Ä–∏ –Ω–µ–≤–µ—Ä–Ω–æ–º –ø–∞—Ä–æ–ª–µ - —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ API
- –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –º–∏–Ω–∏–º–∞–ª—å–Ω—ã –∏ –Ω–µ –∑–∞—Ç—Ä–∞–≥–∏–≤–∞—é—Ç –æ—Å–Ω–æ–≤–Ω—É—é –ª–æ–≥–∏–∫—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è nginx –æ—Å—Ç–∞–ª–∞—Å—å –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
